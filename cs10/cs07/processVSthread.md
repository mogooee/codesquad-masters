# 📋 프로세스와 스레드의 비교

## 📎 프로세스 VS 스레드

<p align="center"><img src="https://www.charlezz.com/wordpress/wp-content/uploads/2020/11/www.charlezz.com-process-thread-thread.png" width="60%" heigth="60%"></p>

###### <div align="center">그림1. 프로세스와 스레드</div>

<br>

> ### 프로세스

- 각 프로세스는 독립된 메모리 영역(code, data, heap, stack)을 할당받는다.
- 다른 프로세스의 자원에 접근 하려면 IPC(Inter Process Communication)으로 통신해야 한다.
  <br>
  <br>

> ### 스레드

- 프로세스 내에서 stack을 제외한 code, data, heap 영역은 공유한다.
- 한 스레드가 프로세스 자원을 변경하면, 이웃 스레드도 그 변경결과를 즉시 볼 수 있다.
  <br>
  <br>

## 📎 멀티프로세스 VS 멀티 스레드

한 어플리케이션에 대한 작업을 동시에 하기 위해서는 2가지 처리 방식이 있다.
<br>

> ### < 멀티 프로세스 >

     하나의 응용 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 태스크를 처리하도록 하는 것이다.

#### < 멀티 프로세스의 장점 >

- 프로세스 하나가 죽어도 다른 프로세스에는 영향이 미치지 않아서 정상적으로 수행된다.
- 동기화 작업이 필요하지 않다.

#### < 멀티 프로세스의 단점 >

- 다른 프로세스의 자원에 접근 하려면 파이프, 파일, 소켓, IPC등을 사용해 통신해야 한다.
- 프로세스간 `Context Switching`이 발생할 때, `CPU`, `register`뿐만 아니라 RAM과 CPU사이의 `cache`까지 초기화되어 `오버헤드`가 크다.
- 각 프로세스는 독립된 메모리 영역(`code`, `data`, `heap`, `stack`)을 할당받으므로 프로세스 사이에서 공유하는 메모리가 없다. 따라서 캐시메모리를 하고 다시 캐시 정보를 받아와야한다.
- 개별 메모리를 차지하므로 많은 메모리 공간을 차지한다.

  <br>
  <br>

> ### < 멀티 스레드 >

    하나의 응용프로그램을 여러 개의 스레드로 구성하고, 각 스레드로 하여금 하나의 작업을 처리하도록 하는 것이다.

#### < 멀티 스레드의 장점 >

- 스레드 간 통신에 별도의 자원을 이용하지 않고도, 공유된 자원(전역 변수 공간(`data`)이나 `heap`영역)으로 데이터를 주고 받을 수 있으므로 통신 비용이 절감 된다.
- 공유된 자원으로 적은 메모리 공간을 차지한다.
- 프로세스를 생성하여 자원을 할당하는 `systemCall`이 줄어든다.
- stack만 전환화면 되므로 Context Switching 속도가 빠르고 비용이 적다.

#### < 멀티 스레드의 단점 >

- Thread끼리 긴밀하게 연결되어 있으므로 하나의 스레드만 종료되어도 전체 스레드가 종료될 수 있다. (멀티 프로세스를 이용하는 이유 !)
- 동기화 작업을 해야한다.
  - 동기화 문제: `critical section`  
    스레드 간에는 전역 변수를 공유하므로 함께 사용할 때 충돌이 발생할 수 있다.
  - 해결책: `Semaphore`, `Mutex` 등

> ⏳ critical section: 동일한 자원을 동시에 접근하는 작업을 실행하는 코드 영역이다.
> <br> > <br>

## 📎 동시성 프로그래밍 방식의 장점

> ### <동시성(Concurrency)>

     멀티 작업을 위해 `하나의 코어`에서 `멀티 스레드`가 번갈아가며(`context switching`) 실행하는 성질

하나의 코어는 하나의 실행단위를 처리하지만 실행단위는 짧은 순간에 `CPU`의 `시간을 분할`해서 점유하며 `context switching`을 한다. 다수의 프로세스(혹은 스레드)가 번갈아가며 진행되어 동시에 하는 것처럼 보이게 한다.

#### 동시성의 장점

- CPU의 처리량이 증가한다.
- 자원의 활용도가 증가한다.
- 프로세스 간의 대기시간이 감소된다.

#### 동시성의 단점

- Context Switching에 대한 Overhead가 발생한다.

<br>
<br>

> ### < 병렬성(Parallelism) >

    멀티 작업을 위해 `멀티 코어`에서 `개별 스레드`를 동시에 실행하는 성질

#### 병렬성의 장점

- 하나의 프로세스를 분할하여 여러 작업으로 처리할 수 있다.
- 하나의 작업에 대해 가용 자원을 더 많이 할당할 수 있다.
- 여러 프로세스에 대해서도 동시에 수행할 수 있다.

#### 병렬성의 단점

- 단일 코어 방식보다 어려운 작성 방식을 가진다.
- 프로세스 분할 처리시 발생하는 추가 비용이 더 크다. 데이터 전송, 동기화, 통신, 전환 등
- 각각의 시스템 아키텍처에 맞게 알고리즘 로직의 조정이 필요하다.

> ⏳ 멀티 코어(Multi core)
> : 멀티프로세스, 멀티스레드는 처리방식으로 소프트웨어의 측면에 가깝다. 멀티코어는 하드웨어 측면에서 물리적으로 여러 코어를 사용하여 다수의 프로세스(혹은 스레드)가 한꺼번에 진행되는 병렬 처리 방식을 사용한다.

<br>
<br>

## 📎 리눅스에서 Process와 Thread

리눅스에서는 프로세스와 스레드를 동일하게 본다.  
-> 리눅스 커널에서는 프로세스와 스레드를 동일하게 본다.

<br>
<br>
<br>

> [ Reference ]
>
> - [프로세스와 스레드 완벽 비교(멀티 스레드/프로세스, 싱글/멀티 스레드)](https://student513.tistory.com/74)
